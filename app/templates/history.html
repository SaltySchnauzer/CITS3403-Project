{% extends "base.html" %}
{% set bodycss = 'bg-green-100' %}

{% block content %}
<div class="bg-green-100 py-12 px-6 md:px-20 lg:px-40">
  <div class="max-w-4xl mx-auto">
    <h2 class="text-3xl md:text-4xl font-extrabold text-gray-900 mb-10 text-center">
      Your Study History
    </h2>

    {% for s in current_user.sessions | reverse %}
      {% if s.ended_at %}
        <div class="bg-white border border-gray-200 p-6 rounded-2xl shadow-md mb-6 transform transition duration-300 hover:scale-105 hover:shadow-xl hover:text-gray-800">
          <div class="flex flex-col md:flex-row justify-between md:items-center">
            <div class="mb-4 md:mb-0">
              <div class="text-xl font-semibold text-gray-800">
                {{ s.name or "Session" }}
              </div>
              <div class="text-sm text-gray-500">
                {{ s.task_type }}
              </div>
              {% if s.started_at.strftime("%d/%m/%y") == s.ended_at.strftime("%d/%m/%y") %}
                <div class="text-sm text-gray-500 mt-1">
                  {{ s.started_at.strftime("%d/%m/%y") }}
                </div>
              {% else %}
                <div class="text-sm text-gray-500 mt-1">
                  {{ s.started_at.strftime("%d/%m/%y") }} - {{ s.ended_at.strftime("%d/%m/%y") }}
                </div>
              {% endif %}
              <div class="text-sm text-gray-500 mt-1">
                {{ s.started_at.strftime("%I:%M %p") }} - {{ s.ended_at.strftime("%I:%M %p") }},
                {{ (s.duration / 60000) | round(0) | int }} minutes
              </div>
              <div class="italic text-sm text-gray-600 mt-2">
                {% if s.description == '' %}
                  No Description.
                {% else %}
                  {{ s.description }}
                {% endif %}
              </div>
            </div>

            <div class="text-right text-sm text-gray-700">
              <div class="font-medium mb-1">
                {{ s.mood }}
              </div>
              <div>
                Productivity: <span class="font-semibold">{{ s.productivity | round(0) | int }}%</span>
              </div>
            </div>
          </div>
        </div>
      {% endif %}
    {% endfor %}
  </div>
</div>
{% endblock %}
